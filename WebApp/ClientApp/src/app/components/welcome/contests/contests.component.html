<h2>Current Contests</h2>
<nz-skeleton *ngIf="contests == null; else contestsLoaded"></nz-skeleton>
<ng-template #contestsLoaded>
  <ng-template #contestsEmpty>
    <nz-empty></nz-empty>
  </ng-template>
  <ng-container *ngIf="contests.length; else contestsEmpty">
    <nz-card *ngFor="let contest of contests"
             [nzTitle]="contestCardTitle"
             [nzExtra]="contestCardExtra">
      <div style="text-align: center;">
        <nz-countdown *ngIf="now < contest.beginTime"
                      [nzTitle]="'Before Start'"
                      [nzValue]="contest.beginTime.unix() * 1000"
        ></nz-countdown>
        <nz-countdown *ngIf="now >= contest.beginTime && now < contest.endTime"
                      [nzTitle]="'Until End'"
                      [nzValue]="contest.endTime.unix() * 1000"
        ></nz-countdown>
        {{ contest.beginTime.format('MM-DD HH:mm') }} - {{ contest.endTime.format('MM-DD HH:mm') }}
      </div>
      <ng-template #contestCardTitle>
        <a *ngIf="canEnterContest(contest); else cannotEnterCardTitle"
           [routerLink]="['/contest', contest.id]">
          #{{ contest.id }}: {{ contest.title }}
        </a>
        <ng-template #cannotEnterCardTitle>
          #{{ contest.id }}: {{ contest.title }}
        </ng-template>
      </ng-template>
      <ng-template #contestCardExtra>
        <nz-tag nzColor="volcano" *ngIf="now > contest.beginTime">Running</nz-tag>
        <nz-tag nzColor="green" *ngIf="contest.isPublic">Public</nz-tag>
        <nz-tag nzColor="red" *ngIf="!contest.isPublic && !contest.registered">Private</nz-tag>
        <nz-tag nzColor="blue" *ngIf="!contest.isPublic && contest.registered">Registered</nz-tag>
      </ng-template>
    </nz-card>
  </ng-container>
</ng-template>
