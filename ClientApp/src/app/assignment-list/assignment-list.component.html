<div class="container">
  <h1 title>Assignment List</h1>
  <table mat-table *ngIf="assignments" [dataSource]="assignments"
         class="mat-elevation-z1" style="width: 100%;">
    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef>#</th>
      <td mat-cell *matCellDef="let assignment">{{ assignment.id }}</td>
    </ng-container>
    <ng-container matColumnDef="title">
      <th mat-header-cell *matHeaderCellDef>Title</th>
      <td mat-cell *matCellDef="let assignment">{{ assignment.title }}</td>
    </ng-container>
    <ng-container matColumnDef="registered">
      <th mat-header-cell *matHeaderCellDef>Registered</th>
      <td mat-cell *matCellDef="let assignment">{{ assignment.registered }}</td>
    </ng-container>
    <ng-container matColumnDef="start">
      <th mat-header-cell *matHeaderCellDef>Start Time</th>
      <td mat-cell *matCellDef="let assignment">{{ assignment.beginTime }}</td>
    </ng-container>
    <ng-container matColumnDef="end">
      <th mat-header-cell *matHeaderCellDef>End Time</th>
      <td mat-cell *matCellDef="let assignment">{{ assignment.endTime }}</td>
    </ng-container>
    <ng-container matColumnDef="type">
      <th mat-header-cell *matHeaderCellDef>Type</th>
      <td mat-cell *matCellDef="let assignment">
        <span class="text-success" *ngIf="assignment.isPublic; else assignmentNotPublic">Public</span>
        <ng-template #assignmentNotPublic>
          <span class="text-danger">Private</span>
        </ng-template>
      </td>
    </ng-container>
    <ng-container matColumnDef="status">
      <th mat-header-cell *matHeaderCellDef>Status</th>
      <td mat-cell *matCellDef="let assignment">
        <span class="text-primary" *ngIf="currentTime < assignment.beginTime; else statusNotPending">Pending</span>
        <ng-template #statusNotPending>
          <span class="text-success" *ngIf="currentTime < assignment.endTime; else statusNotRunning">Running</span>
          <ng-template #statusNotRunning>
            <span>Ended</span>
          </ng-template>
        </ng-template>
      </td>
    </ng-container>
    <ng-container matColumnDef="action">
      <th mat-header-cell *matHeaderCellDef>Action</th>
      <td mat-cell *matCellDef="let assignment">
        <button mat-button style="width: 100%;"
                *ngIf="canRegisterAssignment(assignment)"
        >Register</button>
        <button mat-button style="width: 100%;"
                *ngIf="canEnterAssignment(assignment)"
        >Enter</button>
      </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="assignmentColumns"></tr>
    <tr mat-row *matRowDef="let assignment; columns: assignmentColumns"></tr>
  </table>
</div>
