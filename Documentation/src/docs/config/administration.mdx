# 系统管理

使用管理员账号登录OJ后，可以点击右上角的菜单，进入管理页面。

## 公告管理（Bulletins）

使用Markdown格式文本创建公告，公告会在指定的时间段内出现在首页上。

公告权重是一个有符号数，权重的数字越小，公告越靠前。置顶公告可以使用-999之类的权重数值。
例如，给每个作业设置其对应的权重（如第一次作业的权重为1，第二次为2……）则所有作业对应的公告可以按序排列。

## 用户管理（Users）

Import Users可以批量导入用户，采用逗号分割文档（CSV格式），每行对应一条数据。
如果某一行没有提供密码，则默认使用学号为密码。
需要批量导入用户（如考试）时可以用Excel批量生成并导入。

编辑用户可以修改其密码、学号和名称，但不能修改用于登陆的用户名。

用户权限由管理员、用户管理、作业管理、提交管理四种角色组成，
普通用户不具有任何权限，给予某种管理权限能够让用户访问管理页面中对应的功能，管理员可以访问所有功能。

## 作业管理（Contests）

作业由作业标题、描述、类型、起止时间、奖励分组成。

作业的Type分为公开和私有两种，私有作业在结束时间前必须要由管理员添加用户才可以进入。

作业的Mode共有4种，基本只用过Practice模式，会根据通过的所有测试点的数量给分。
OI/CF Mode的工作原理是在作业结束时间前只运行样例，如需使用的话需要在作业结束后手动触发rejudge。

作业分数的Bonus和Decay就是根据提交时间在某一时间前/后按照某一比例给予/扣除额外分数。
晚交作业的惩罚有线性变化和非线性变化两种，可按需使用。

创建完作业后，可以点击上方的Registrations标签页，对作业中的用户进行管理。
正如前文所说，私有的作业必须由管理员添加用户后才可以访问。
可以将用户作为选手、管理员（打\*）、观察者（两个复选框都不选，也打\*）进行添加。
添加了某一次作业的所有用户后，以后就可以通过这个作业的ID快速复制所有的用户信息。

作业成绩的导出和录入请参考[教学使用](/examples/course)。

## 题目管理（Problems）

首先需要说明的一点是，OJ对题目的处理方式和HustOJ是恰恰相反的。
在HustOJ中，题目是独立存在的，每一次作业可以选择一些题目编入，也就是说一道题可以用很多次；
而在问求OJ中，题目是依赖于作业的，如果作业被删除那么所有的题目以及题目的所有提交都会被删除。
每一道题在作业结束之后大家都可以看别人的代码，所以根本没有重复使用的意义。

- 要添加一道题目，首先需要填入作业的ID（由于太懒，不支持搜索，理解一下）。
- 填入作业ID后请选择Ordinary类型的题目（直接选Lab会出bug无法保存，理解一下）。
- 接下来依次填写题目的标题、描述、输入输出、注解（提示），可以使用Markdown格式文本。
- 然后是时间限制（单位ms）、内存限制（单位KiB）。
- 如果需要SPJ，SPJ仅支持testlib格式的判题程序，请将SPJ源代码直接贴入输入框里面。
  testlib的SPJ样例可以在[Codeforces Polygon](http://polygon.codeforces.com)上复制。
- 最后是样例数据，可以添加任意多的样例（需要注意的是OJ如果样例有一个不正确就不评测测试点，该提交直接0分）。

提交保存数据后，点击Test Cases选项卡编辑测试用例。
测试用例需要上传一个zip压缩包，压缩包内的所有同名in/out文件会作为一个测试点被处理。
例如：压缩包内有"1.in"和"1.out"，这两个文件就会组成一个测试点。
测试文件可以放在压缩包内的子文件夹内，只要同路径同名就可以了；
另外测试文件是按照字典序严格排序的，因此"test10"会排在"test2"前面，这种情况下可以改成"test02"看起来比较舒服。
修改完测试数据后，下面有一个提交框可以直接交代码测试。

进入Export选项卡，可以将整道题目导出成zip压缩包（可以在其他的问求OJ上导入）。
也可以导出这道题目的所有用户第一次AC的提交或所有用户的所有提交用于手动查重。

进入Plagiarisms选项卡，可以对题目进行查重，默认查重范围是所有用户的第一次AC代码。
查重采用jplag进行，C/C++、Java、Python会单独分类查重，其他语言作为纯文本语言进行查重，保留重复率超过40%的详细结果。
如果某种语言只有1个人提交，就不会对他查重。
查重结果不会自动更新，手动点一下刷新页面，理解一下。
查重结果出了之后可以点击语言直接查看，查重结果只会在服务器保存7天，7天后会自动删除，要重新访问的话再进行一次查重就可以了。

## 提交管理（Submissions）

可以查看某一次提交的详细信息，包括源代码、运行结果、**第一个错误**的测试点编号（编号不是文件名！需要在题目的测试点信息里面根据编号找到对应的文件）。
管理员可以手动修改提交的结果和信息（不建议使用这个功能，因为点击重测之后该WA的还是会WA）。

点击管理页面右上角的黄色Rejudge按钮，可以进行重测。
重测页面有三个框，分别是作业ID、题目ID和提交ID，会查找符合该条件（三个条件是求交关系）的提交进行重测。

## 文件上传

很遗憾，这个OJ没有文件上传功能，理解一下（不如谁想要谁实现一个吧）。
zty的工作流程一般都是把要传到OJ的图片等文件直接传到题解网站上。

但如果非要上传文件到OJ，请把文件通过SCP/SFTP协议传输到服务器存储数据中的`static`文件夹内，
整个文件夹通过磁盘挂载挂载到了WebApp的镜像内部，这些文件之后就可以通过WebApp访问，
如`/data/static/exam.pdf`可以通过`oj.njujb.com:8085/static/exam.pdf`访问。